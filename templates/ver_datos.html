<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Reportes | AgroPredic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  </head>
  <body>
    <nav class="navbar">
      <a href="/" class="brand"><i class="fa-solid fa-leaf"></i> AgroPredic</a>
      <div class="nav-menu">
        <a href="/" class="nav-link"><i class="fa-solid fa-house"></i> Inicio</a>
        <a href="/ingreso" class="nav-link active"><i class="fa-solid fa-plus"></i> Nuevo Registro</a>
      </div>
    </nav>

    <div class="main-content">
      <header class="page-header" style="display: flex; justify-content: space-between; align-items: start;">
        <div>
          <h1 class="page-title">Historial de Operaciones</h1>
          <p class="page-subtitle">Registro completo de transacciones y cargas masivas.</p>
        </div>
        <button onclick="window.print()" class="btn btn-secondary"><i class="fa-solid fa-print"></i> Imprimir Reporte</button>
      </header>

      <div class="card" style="padding: 0; overflow: hidden;">
        {% if ventas %}
          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th width="10%">ID</th>
                  <th width="25%">Cultivo</th>
                  <th width="25%">Fecha Registro</th>
                  <th width="20%">Volumen (Kg)</th>
                  <th width="20%">Precio Unitario</th>
                </tr>
              </thead>
              <tbody>
                {% for venta in ventas %}
                  <tr>
                    <td>
                      <span style="color: #9ca3af; font-family: monospace;">#{{ venta.id }}</span>
                    </td>
                    <td>
                      <span style="font-weight: 600; color: var(--primary-color);">
                        {% if venta.cultivo == 'Palta' %}
                          ü•ë
                        {% elif venta.cultivo == 'Mango' %}
                          ü•≠
                        {% else %}
                          ü´ê
                        {% endif %}
                        {{ venta.cultivo }}
                      </span>
                    </td>
                    <td>{{ venta.fecha }}</td>
                    <td style="font-weight: 500;">{{ venta.volumen_kg }}</td>
                    <td>S/. {{ venta.precio_unitario }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <div style="padding: 15px; background: #f9fafb; border-top: 1px solid #e5e7eb; text-align: center; color: #6b7280; font-size: 0.85rem;">Fin del reporte - Mostrando {{ ventas|length }} registros</div>
        {% else %}
          <div style="padding: 3rem; text-align: center;">
            <div style="font-size: 2rem; color: #d1d5db; margin-bottom: 1rem;">
              <i class="fa-solid fa-folder-open"></i>
            </div>
            <h3 style="color: #374151; margin-bottom: 0.5rem;">No hay datos registrados</h3>
            <p style="color: #6b7280; margin-bottom: 1.5rem;">La base de datos de ventas est√° vac√≠a actualmente.</p>
            <a href="/ingreso" class="btn btn-primary"><i class="fa-solid fa-plus-circle"></i> Registrar Primera Venta</a>
          </div>
        {% endif %}
      </div>
    </div>
  </body>
</html>
